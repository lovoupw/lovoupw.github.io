<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content="负重前行，O52O加油吧少年"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>优选订阅生成器 WorkerVless2sub | O52O</title>

<link rel="shortcut icon" href="https://0520.eu.org/favicon.ico?v=1726225545706">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://0520.eu.org/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            O52O
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            首页
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/javascript" class="menu gt-a-link">
                            Javascript
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            归档
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            标签
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/friends" class="menu gt-a-link">
                            友链
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            关于
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1726225545706" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    优选订阅生成器 WorkerVless2sub
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2024-05-05 ·
                    </time>
                    
                        <a href="https://0520.eu.org/tag/EBewTf4BR/" class="post-tags">
                            # vless
                        </a>
                    
                        <a href="https://0520.eu.org/tag/yh0_Ep847u/" class="post-tags">
                            # 订阅
                        </a>
                    
                </div>
                <div class="post-content">
                    <h1 id="优选订阅生成器-workervless2sub">优选订阅生成器 WorkerVless2sub</h1>
<h3 id="这个是一个通过-cloudflare-workers-搭建自动生成优选线路-vless-节点订阅内容生成器-实现原理">这个是一个通过 Cloudflare Workers 搭建，自动生成优选线路 VLESS 节点订阅内容生成器 <a href="https://www.youtube.com/watch?v=p-KhFJAC4WQ&amp;t=70s">[实现原理]</a></h3>
<p>Telegram交流群：<a href="https://t.me/CMLiussss">@CMLiussss</a></p>
<h1 id="pages-部署方法-视频教程">Pages 部署方法 <a href="https://www.youtube.com/watch?v=p-KhFJAC4WQ&amp;t=509s">视频教程</a></h1>
<!-- more -->
<h3 id="1-部署-cloudflare-pages">1. 部署 Cloudflare Pages：</h3>
<ul>
<li>在 Github 上先 Fork 本项目，并点上 Star !!!</li>
<li>在 Cloudflare Pages 控制台中选择 <code>连接到 Git</code>后，选中 <code>WorkerVless2sub</code>项目后点击 <code>开始设置</code>。</li>
</ul>
<h3 id="2-给-pages绑定-自定义域">2. 给 Pages绑定 自定义域：</h3>
<ul>
<li>在 Pages控制台的 <code>自定义域</code>选项卡，下方点击 <code>设置自定义域</code>。</li>
<li>填入你的自定义次级域名，注意不要使用你的根域名，例如：<br>
您分配到的域名是 <code>fuck.cloudns.biz</code>，则添加自定义域填入 <code>sub.fuck.cloudns.biz</code>即可；</li>
<li>按照 Cloudflare 的要求将返回你的域名DNS服务商，添加 该自定义域 <code>sub</code>的 CNAME记录 <code>WorkerVless2sub.pages.dev</code> 后，点击 <code>激活域</code>即可。</li>
</ul>
<h3 id="3-修改-快速订阅入口-以及-添加内置-vless-节点信息">3. 修改 快速订阅入口 以及 添加内置 Vless 节点信息：</h3>
<p>例如您的pages项目域名为：<code>sub.fuck.cloudns.biz</code>；</p>
<ul>
<li>添加 <code>TOKEN</code> 变量，快速订阅访问入口，默认值为: <code>auto</code> ，获取订阅器默认节点订阅地址即 <code>/auto</code> ，例如 <code>https://sub.fuck.cloudns.biz/auto</code></li>
<li>添加 <code>HOST</code> 变量，例如 <code>edgetunnel-2z2.pages.dev</code>；</li>
<li>添加 <code>UUID</code> 变量，例如 <code>30e9c5c8-ed28-4cd9-b008-dc67277f8b02</code>；</li>
<li>添加 <code>PATH</code> 变量，例如 <code>/?ed=2048</code>；</li>
</ul>
<h3 id="4-添加你的专属优选线路">4. 添加你的专属优选线路：</h3>
<ul>
<li>添加变量 <code>ADD</code>/<code>ADDNOTLS</code> 本地静态的优选线路，若不带端口号 TLS默认端口为443 / noTLS默认端口为80，#号后为备注别名，例如：</li>
</ul>
<pre><code>icook.tw:2053#优选域名
cloudflare.cfgo.cc#优选官方线路
</code></pre>
<ul>
<li>添加变量 <code>ADDAPI</code>/<code>ADDNOTLSAPI</code> 为 <strong>优选IP地址txt文件</strong> 的 URL。例如：</li>
</ul>
<pre><code class="language-url">https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesapi.txt
https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesipv6api.txt
</code></pre>
<details>
<summary><code><strong>「 我不是小白！我有IP库！我知道IPtest是什么！我也有csv测速文件！ 」</strong></code></summary>
<ul>
<li>添加变量 <code>ADDCSV</code> 为 <strong>iptest测速结果csv文件地址</strong> 的 URL。例如：</li>
</ul>
<pre><code class="language-js">https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressescsv.csv
</code></pre>
<ul>
<li>添加变量 <code>DLS</code> ，意为<code>ADDCSV</code>满足最低速度的要求，不满足改数值以上的IP将不会添加至优选订阅内容。注意：不考虑单位，只看数值，请按照您的测速结果而定。例如：</li>
</ul>
<pre><code class="language-js">8
</code></pre>
 </details>
<h1 id="workers-部署方法-视频教程">Workers 部署方法 <a href="https://youtu.be/AtCF7eq0hcE">视频教程</a></h1>
<h3 id="1-部署-cloudflare-worker">1. 部署 Cloudflare Worker：</h3>
<ul>
<li>在 Cloudflare Worker 控制台中创建一个新的 Worker。</li>
<li>将 <a href="https://github.com/cmliu/WorkerVless2sub/blob/main/_worker.js">worker.js</a>  的内容粘贴到 Worker 编辑器中。</li>
</ul>
<h3 id="2-修改-快速订阅入口-以及-添加内置-vless-节点信息">2. 修改 快速订阅入口 以及 添加内置 Vless 节点信息：</h3>
<p>例如您的workers项目域名为：<code>sub.cmliussss.workers.dev</code>；</p>
<ul>
<li>添加 <code>TOKEN</code> 变量，快速订阅访问入口，默认值为: <code>auto</code> ，获取订阅器默认节点订阅地址即 <code>/auto</code> ，例如 <code>https://sub.cmliussss.workers.dev/auto</code></li>
<li>添加 <code>HOST</code> 变量，例如 <code>edgetunnel-2z2.pages.dev</code>；</li>
<li>添加 <code>UUID</code> 变量，例如 <code>30e9c5c8-ed28-4cd9-b008-dc67277f8b02</code>；</li>
<li>添加 <code>PATH</code> 变量，例如 <code>/?ed=2048</code>；</li>
</ul>
<h3 id="3-添加你的专属优选线路">3. 添加你的专属优选线路：</h3>
<p><strong>3.1 修改 addresses 参数示例</strong></p>
<ul>
<li>修改 <code>addresses</code> 参数添加本地静态的优选线路，若不带端口号默认443，不支持生成非TLS订阅，#号后为备注别名，例如：<pre><code class="language-js">let addresses = [
	'icook.tw:2053#优选域名',
	'cloudflare.cfgo.cc#优选官方线路',
	'185.221.160.203:443#电信优选IP',
];
</code></pre>
该方式仅推荐添加优选域名的部分，频繁变更的优选推荐通过 <code>addressesapi</code> 来实现。</li>
</ul>
<p><strong>3.2 修改 addressesapi 参数示例</strong></p>
<ul>
<li>修改 <code>addressesapi</code> 参数，在脚本中设置 <code>addressesapi</code> 变量为 <strong>优选IP地址txt文件</strong> 的 URL。例如：<pre><code class="language-js">let addressesapi = [
	'https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesapi.txt',
	'https://addressesapi.090227.xyz/CloudFlareYes',
];
</code></pre>
可参考 <a href="https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesapi.txt">addressesapi.txt</a> 内容格式 自行搭建。</li>
</ul>
<details>
<summary><code><strong>「 我不是小白！我有IP库！我知道IPtest是什么！我也有csv测速文件！ 」</strong></code></summary>
<p><strong>3.3 修改 addressescsv 参数示例</strong></p>
<ul>
<li>修改 <code>addressescsv</code> 参数，在脚本中设置 <code>addressescsv</code> 变量为 <strong>iptest测速结果csv文件地址</strong> 的 URL。例如：<pre><code class="language-js">let DLS = 4;//速度下限
let addressescsv = [
	'https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressescsv.csv',
	'https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressescsv.csv',
];
</code></pre>
<code>DLS</code> 为要求满足的最低速度，不满足改数值以上的IP将不会添加至优选订阅内容。注意：不考虑单位，只看数值，请按照您的测速结果而定。</li>
</ul>
 </details>
<h1 id="订阅生成器-使用方法-视频教程">订阅生成器 使用方法 <a href="https://youtu.be/OjqCKeEY7DQ">视频教程</a></h1>
<p>例如您的workers项目域名为：<code>sub.cmliussss.workers.dev</code>；</p>
<h3 id="1-快速订阅">1. 快速订阅</h3>
<ul>
<li>添加 <code>TOKEN</code> 变量，快速订阅访问入口，默认值为: <code>auto</code> ，获取订阅器默认节点订阅地址即 <code>/auto</code> ，例如：<pre><code class="language-url">https://sub.cmliussss.workers.dev/auto
</code></pre>
</li>
</ul>
<h3 id="2-自定义订阅">2. 自定义订阅</h3>
<ul>
<li><strong>自定义订阅格式</strong> <code>https://[你的Workers域名]/sub?host=[你的Vless域名]&amp;uuid=[你的UUID]&amp;path=[你的ws路径]</code></li>
<li><strong>host</strong>：您的 VLESS 伪装域名，例如 <code>edgetunnel-2z2.pages.dev</code>；</li>
<li><strong>uuid</strong>：您的 VLESS 客户端 UUID，例如 <code>30e9c5c8-ed28-4cd9-b008-dc67277f8b02</code>；</li>
<li><strong>path</strong>（可选）：您的 VLESS 的 WS 路径（没有可留空不填），例如 <code>/?ed=2048</code>。</li>
<li>自定义订阅地址如下：<pre><code class="language-url">https://sub.cmliussss.workers.dev/sub?host=edgetunnel-2z2.pages.dev&amp;uuid=30e9c5c8-ed28-4cd9-b008-dc67277f8b02&amp;path=/?ed=2048
</code></pre>
</li>
<li>注意路径必须包含 &quot;/sub&quot;。</li>
</ul>
<h3 id="3-指定-clash-singbox-配置文件">3. 指定 clash、singbox 配置文件</h3>
<ul>
<li>
<p>添加 <code>format=clash</code> 键值，获取 clash 订阅配置，例如：</p>
<pre><code class="language-url">https://sub.cmliussss.workers.dev/auto?format=clash
https://sub.cmliussss.workers.dev/sub?format=clash&amp;host=edgetunnel-2z2.pages.dev&amp;uuid=30e9c5c8-ed28-4cd9-b008-dc67277f8b02&amp;path=/?ed=2048
</code></pre>
</li>
<li>
<p>添加 <code>format=singbox</code> 键值，获取 singbox 订阅配置，例如：</p>
<pre><code class="language-url">https://sub.cmliussss.workers.dev/auto?format=singbox
https://sub.cmliussss.workers.dev/sub?format=singbox&amp;host=edgetunnel-2z2.pages.dev&amp;uuid=30e9c5c8-ed28-4cd9-b008-dc67277f8b02&amp;path=/?ed=2048
</code></pre>
</li>
</ul>
<h3 id="变量说明">变量说明</h3>
<table>
<thead>
<tr>
<th>变量名</th>
<th>示例</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>TOKEN</td>
<td>auto</td>
<td>快速订阅内置节点的订阅路径地址 /auto (支持多元素, 元素之间使用<code>,</code>作间隔)</td>
</tr>
<tr>
<td>HOST</td>
<td>edgetunnel-2z2.pages.dev</td>
<td>快速订阅内置节点的伪装域名</td>
</tr>
<tr>
<td>UUID</td>
<td>b7a392e2-4ef0-4496-90bc-1c37bb234904</td>
<td>快速订阅内置节点的UUID</td>
</tr>
<tr>
<td>PATH</td>
<td>/?ed=2560</td>
<td>快速订阅内置节点的路径信息</td>
</tr>
<tr>
<td>ADD</td>
<td>icook.tw:2053#官方优选域名</td>
<td>对应<code>addresses</code>字段 (支持多元素, 元素之间使用<code>,</code>作间隔)</td>
</tr>
<tr>
<td>ADDAPI</td>
<td><a href="https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesapi.txt">https://raw.github.../addressesapi.txt</a></td>
<td>对应<code>addressesapi</code>字段 (支持多元素, 元素之间使用<code>,</code>作间隔)</td>
</tr>
<tr>
<td>ADDNOTLS</td>
<td>icook.hk:8080#官方优选域名</td>
<td>对应<code>addressesnotls</code>字段 (支持多元素, 元素之间使用<code>,</code>作间隔)</td>
</tr>
<tr>
<td>ADDNOTLSAPI</td>
<td><a href="https://raw.githubusercontent.com/cmliu/CFcdnVmess2sub/main/addressesapi.txt">https://raw.github.../addressesapi.txt</a></td>
<td>对应<code>addressesnotlsapi</code>字段 (支持多元素, 元素之间使用<code>,</code>作间隔)</td>
</tr>
<tr>
<td>ADDCSV</td>
<td><a href="https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressescsv.csv">https://raw.github.../addressescsv.csv</a></td>
<td>对应<code>addressescsv</code>字段 (支持多元素, 元素之间使用<code>,</code>作间隔)</td>
</tr>
<tr>
<td>DLS</td>
<td>8</td>
<td><code>addressescsv</code>测速结果满足速度下限</td>
</tr>
<tr>
<td>NOTLS</td>
<td>false</td>
<td>改为<code>true</code>, 将不做域名判断 始终返回noTLS节点</td>
</tr>
<tr>
<td>TGTOKEN</td>
<td>6894123456:XXXXXXXXXX0qExVsBPUhHDAbXXXXXqWXgBA</td>
<td>发送TG通知的机器人token</td>
</tr>
<tr>
<td>TGID</td>
<td>6946912345</td>
<td>接收TG通知的账户数字ID</td>
</tr>
<tr>
<td>SUBAPI</td>
<td>api.v1.mk</td>
<td>clash、singbox等 订阅转换后端</td>
</tr>
<tr>
<td>SUBCONFIG</td>
<td><a href="https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_Full_MultiMode.ini">https://raw.github.../ACL4SSR_Online_Full_MultiMode.ini</a></td>
<td>clash、singbox等 订阅转换配置文件</td>
</tr>
<tr>
<td>SUBNAME</td>
<td>WorkerVless2sub</td>
<td>订阅生成器名称</td>
</tr>
<tr>
<td>PS</td>
<td>【请勿测速】</td>
<td>节点名备注消息</td>
</tr>
</tbody>
</table>
<h2 id="star-星星走起">Star 星星走起</h2>
<figure data-type="image" tabindex="1"><a href="https://starchart.cc/cmliu/WorkerVless2sub"><img src="https://starchart.cc/cmliu/WorkerVless2sub.svg?variant=adaptive" alt="Stargazers over time" loading="lazy"></a></figure>
<h1 id="感谢">感谢</h1>
<p>我自己的脑洞，<a href="https://github.com/SAKURA-YUMI">SAKURA-YUMI</a>，<a href="https://github.com/EzSync">EzSync</a>、<a href="https://github.com/ACL4SSR/ACL4SSR/tree/master/Clash/config">ACL4SSR</a>、<a href="https://github.com/youshandefeiyang/sub-web-modify">肥羊</a></p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://0520.eu.org/post/cloudflare-worker-2-vless-and-sub/" class="post-title gt-a-link">
                    Cloudflare Worker 2 Vless &amp; Sub转换脚本
                </a>
            </div>
        

        

        
            

            
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/npm/disqusjs/dist/disqus.js"></script>

<div id="disqus_thread"></div>

<script>

var options = {
  shortname: '0520',
  apikey: '',
}
if ('https://0520.disqus.com') {
  options.api = 'https://0520.disqus.com'
}
var dsqjs = new DisqusJS(options)

</script>

            
        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first"></div>
    <div class="social-container">
        
            
                <a href="https://github.com/lovoupw" target="_blank">
                    <i class="fab fa-github gt-c-content-color-first"></i>
                </a>
            
        
            
                <a href="https://twitter.com/lovou_pw" target="_blank">
                    <i class="fab fa-twitter gt-c-content-color-first"></i>
                </a>
            
        
            
                <a href="https://weibo.com/316302888" target="_blank">
                    <i class="fab fa-weibo gt-c-content-color-first"></i>
                </a>
            
        
            
                <a href="https://zhihu.com/people/feng-ling-71-63-43" target="_blank">
                    <i class="fab fa-zhihu gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Copyright &copy;2024 负重前行 <a href="https://blog.lovou.pw" target="_blank">O52O</a> 加油吧少年
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://0520.eu.org/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
